# –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Ä–∏—Ç—Ä–∏–≤–µ—Ä–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤

## –ß—Ç–æ —Ç–∞–∫–æ–µ `data/generated/`?

**`data/generated/`** - —ç—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è **—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã** (ground truth –ø—Ä–æ–µ–∫—Ç—ã), —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –≤ Phase 1 –∏ Phase 2:

1. **Phase 1**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚Üí `data/generated/specifications/`
2. **Phase 2**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–µ –∫–æ–¥–æ–≤—ã–µ –±–∞–∑—ã ‚Üí `data/generated/codebases/` –∏–ª–∏ `data/generated/{project_name}/`
3. **Phase 3**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –æ—Ü–µ–Ω–∫–∏ ‚Üí `data/output/scenarios/`

## –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –æ—Ü–µ–Ω–∫–æ–π –º–æ–¥–µ–ª–µ–π

### Phase 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (`scenario_generator.py`)

–ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ **–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏** (Phase 3), –æ–Ω–∞:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç—ã –∏–∑ `data/generated/`
- –í—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–ù–ï –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤** –≤ –ø—Ä–æ–º–ø—Ç LLM
- –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ **summary** (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ):
  ```python
  files_summary.append(f"- {file_path}: {lines} lines, {chars} chars")
  ```
- –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ ‚úÖ

### Phase 4: –û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–µ–π (`evaluator.py`)

–ö–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ **–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª–∏** (Phase 4), –æ–Ω–∞:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–∑ `data/output/scenarios/`
- –°—Ü–µ–Ω–∞—Ä–∏–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ø–∏—Å–æ–∫ `context_files` (–ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º)
- –†–∏—Ç—Ä–∏–≤–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å **–ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ** —ç—Ç–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ `data/generated/`
- –ï—Å–ª–∏ —Ä–∏—Ç—Ä–∏–≤–µ—Ä –≤–∫–ª—é—á–µ–Ω, –æ–Ω –≤—ã–±–∏—Ä–∞–µ—Ç top-K —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
- –ï—Å–ª–∏ —Ä–∏—Ç—Ä–∏–≤–µ—Ä –≤—ã–∫–ª—é—á–µ–Ω –∏–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

1. **–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** (Phase 3):
   - ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ summary —Ñ–∞–π–ª–æ–≤ (~100-500 —Ç–æ–∫–µ–Ω–æ–≤)

2. **–ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ –º–æ–¥–µ–ª–µ–π** (Phase 4):
   - ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –µ—Å–ª–∏ —Ä–∏—Ç—Ä–∏–≤–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã), –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º
   - ‚ùå –ï—Å–ª–∏ –±—ã —Ä–∏—Ç—Ä–∏–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–ª, –æ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞–ª –±—ã top-K —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ (—ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤)
   - ‚ö†Ô∏è –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã —Ü–µ–ª–∏–∫–æ–º, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ (100K-1M —Ç–æ–∫–µ–Ω–æ–≤)

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–∏—Ç—Ä–∏–≤–µ—Ä?

–†–∏—Ç—Ä–∏–≤–µ—Ä (Retrieval-Augmented Generation) - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã** –∏–∑ `data/generated/{project_name}/`
2. **–†–∞–∑–±–∏–≤–∞–µ—Ç –∏—Ö –Ω–∞ —á–∞–Ω–∫–∏** (~512 —Å–∏–º–≤–æ–ª–æ–≤ –∫–∞–∂–¥—ã–π)
3. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç embeddings** (–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è) –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
4. **–í—ã–±–∏—Ä–∞–µ—Ç top-K** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5) –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
5. **–ü–µ—Ä–µ–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ —ç—Ç–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã** –º–æ–¥–µ–ª–∏ –≤–º–µ—Å—Ç–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤: –≤–º–µ—Å—Ç–æ 100K —Ç–æ–∫–µ–Ω–æ–≤ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è ~5-10K —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –õ—É—á—à–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–π –∫–æ–¥
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –±–æ–ª—å—à–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞ –≤ –≤–∞—à–µ–º —Å–ª—É—á–∞–µ:
- ‚ùå –§–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ `data/generated/`
- ‚ùå –†–∏—Ç—Ä–∏–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚ö†Ô∏è –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

–í—ã –ø—Ä–∞–≤—ã - –≤ `scenario_generator.py` –ø—Ä–æ–º–ø—Ç —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω:

```python
# –°—Ç—Ä–æ–∫–∏ 752-758: —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ summary
files_summary.append(f"- {file_path}: {lines} lines, {chars} chars")
context_summary = "\n".join(files_summary)

# –í –ø—Ä–æ–º–ø—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ summary, –∞ –Ω–µ –ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
AVAILABLE FILES:
{context_summary}  # –¢–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ!
```

–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —ç–∫–æ–Ω–æ–º–∏—Ç —Ç–æ–∫–µ–Ω—ã –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

## –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤

–î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å `locobench/utils/token_counter.py`:
- –ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è OpenAI (—Å tiktoken –∏–ª–∏ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
- –ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è Google/Gemini (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
- –ü–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è Claude (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

–¢–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
üìä Prompt tokens: 15,234 (chars: 60,936)
üìù Prompt length: 60,936 chars (15,234 tokens), System prompt: 0 chars (0 tokens)
üìä Total input tokens: 15,234
```

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç:
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—ã
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å API –≤—ã–∑–æ–≤–æ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** (Phase 3):
   - ‚úÖ –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π - –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ summary
   - ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –º–µ–Ω—è—Ç—å

2. **–î–ª—è –æ—Ü–µ–Ω–∫–∏ –º–æ–¥–µ–ª–µ–π** (Phase 4):
   - ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `data/generated/` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–µ–∫—Ç—ã
   - ‚úÖ –í–∫–ª—é—á–∏—Ç–µ —Ä–∏—Ç—Ä–∏–≤–µ—Ä –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤
   - ‚úÖ –†–∏—Ç—Ä–∏–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–∫–µ–Ω–æ–≤**:
   - ‚úÖ –¢–µ–ø–µ—Ä—å –≤—ã –≤–∏–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ª–æ–≥–∞—Ö
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∏—Ç—Ä–∏–≤–µ—Ä–∞

–í `config.yaml`:
```yaml
retrieval:
  enabled: true              # –í–∫–ª—é—á–µ–Ω
  difficulties: [hard, expert]  # –¢–æ–ª—å–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
  method: embedding           # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç embeddings
  top_k: 5                    # –ë–µ—Ä–µ—Ç 5 —Å–∞–º—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
  chunk_size: 512             # –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞
```

–≠—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞.
